{"componentChunkName":"component---src-templates-detail-template-jsx","path":"/python-functools-reduce/","result":{"pageContext":{"previous":{"fields":{"slug":"/docker/"},"frontmatter":{"title":"Docker 시작하기 (개념/설치)"}},"node":{"html":"<h2 id=\"reduce-함수\" style=\"position:relative;\"><a href=\"#reduce-%ED%95%A8%EC%88%98\" aria-label=\"reduce 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>reduce 함수</h2>\n<p>파이썬의 <code>functools</code> 내장 모듈의 <code>reduce()</code> 함수는 여러 개의 데이터를 대상으로 주로 누적 집계를 내기 위해서 사용합니다.</p>\n<p>기본 문법은 다음과 같은데요. 기본적으로 초기값을 기준으로 데이터를 루프 돌면서 집계 함수를 계속해서 적용하면서 데이터를 누적하는 방식으로 작동합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span>집계 함수<span class=\"token punctuation\">,</span> 순회 가능한 데이터<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> 초기값<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>여기서, 집계 함수는 두개의 인자를 받아야 하는데요. 첫번째 인자는 누적자(accumulator), 두번째 인자는 현재값(current value)가 넘어오게 됩니다.<br>누적자는 함수 실행의 시작부터 끝까지 계속해서 재사용되는 값이고, 현재값은 루프 돌면서 계속해서 바뀌는 값입니다.</p>\n<h2 id=\"실습-데이터-생성\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%83%9D%EC%84%B1\" aria-label=\"실습 데이터 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습 데이터 생성</h2>\n<p>파이썬 인터프리터에서 다음과 같이 유저 5명의 데이터를 임의로 생성합니다. 5개의 dictionary를 담고 있는 list 입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Brett Holland'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">73</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Madison Martinez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Michael Jenkins'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">51</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'daniel79@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Karen Rodriguez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">32</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ujackson@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Amber Rhodes'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"임포트\" style=\"position:relative;\"><a href=\"#%EC%9E%84%ED%8F%AC%ED%8A%B8\" aria-label=\"임포트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>임포트</h2>\n<p><code>reduce()</code>는 내장 함수가 아니기 때문에 <code>functools</code> 내장 모듈을 통해서 임포트를 해줘야 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> functools <span class=\"token keyword\">import</span> <span class=\"token builtin\">reduce</span></code></pre></div>\n<h2 id=\"나이-합계-구하기\" style=\"position:relative;\"><a href=\"#%EB%82%98%EC%9D%B4-%ED%95%A9%EA%B3%84-%EA%B5%AC%ED%95%98%EA%B8%B0\" aria-label=\"나이 합계 구하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>나이 합계 구하기</h2>\n<p>그럼, 실습 데이터를 대상으로 <code>reduce()</code> 함수를 사용해서 유저들의 나이의 합을 구해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> acc<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">:</span> acc <span class=\"token operator\">+</span> cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">227</span></code></pre></div>\n<p>누작자에 초기값 <code>0</code>이 세팅되고, 그 다음 각 유저의 나이가 집계 함수에 의해서 계속해서 더해지게 됩니다.</p>\n<p>다음과 같이 <code>reduce()</code> 함수의 실행 과정을 직접 따라가보면 좀 더 이해가 쉬우실 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">0</span>\n<span class=\"token number\">0</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">+</span> <span class=\"token number\">73</span>\n<span class=\"token number\">73</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">73</span> <span class=\"token operator\">+</span> <span class=\"token number\">29</span>\n<span class=\"token number\">102</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">102</span> <span class=\"token operator\">+</span> <span class=\"token number\">51</span>\n<span class=\"token number\">153</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">153</span> <span class=\"token operator\">+</span> <span class=\"token number\">32</span>\n<span class=\"token number\">185</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">185</span> <span class=\"token operator\">+</span> <span class=\"token number\">42</span>\n<span class=\"token number\">227</span></code></pre></div>\n<h2 id=\"이메일-목록-구하기\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%A9%94%EC%9D%BC-%EB%AA%A9%EB%A1%9D-%EA%B5%AC%ED%95%98%EA%B8%B0\" aria-label=\"이메일 목록 구하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이메일 목록 구하기</h2>\n<p>유저 이메일 목록도 <code>reduce()</code> 함수를 이용하면 어렵지 않게 만들어 낼 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> acc<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">:</span> acc <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span>cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"mail\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'daniel79@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ujackson@gmail.com'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>마찬가지로 <code>reduce()</code> 함수의 실행 과정을 직접 따라가보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'daniel79@gmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'daniel79@gmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'daniel79@gmail.com'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ujackson@gmail.com'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'daniel79@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ujackson@gmail.com'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"성별로-분류-하기\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%B3%84%EB%A1%9C-%EB%B6%84%EB%A5%98-%ED%95%98%EA%B8%B0\" aria-label=\"성별로 분류 하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성별로 분류 하기</h2>\n<p><code>reduce()</code> 함수는 데이터 그룹핑(data grouping)과 같이 좀 더 복잡한 누적 집계에도 활용될 수 있습니다.</p>\n<p>예를 들어, 유저 이름을 성별에 따라 분류해보도록 하겠습니다.<br>람다 함수를 사용하기에는 다소 복잡한 케이스이므로, <code>names_by_sex()</code>라는 함수를 하나 선언하도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">def</span> <span class=\"token function\">names_by_sex</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     sex <span class=\"token operator\">=</span> cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">if</span> sex <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> acc<span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>         acc<span class=\"token punctuation\">[</span>sex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     acc<span class=\"token punctuation\">[</span>sex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">return</span> acc\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p><code>reduce()</code> 함수에 <code>names_by_sex</code> 함수를 인자로 넘기면, 성별을 키로 이름 list를 값으로 갖는 dictionary를 얻게 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span>names_by_sex<span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span><span class=\"token string\">'M'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Brett Holland'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Michael Jenkins'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Madison Martinez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Karen Rodriguez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Amber Rhodes'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>구지 람다 함수를 통해서 동일한 작업을 하고 싶은 분들은 아래 코드를 참고바라겠습니다. 가독성이 현저히 떨어지기 때문에 상용으로는 사용하기 어려운 코드일 것 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> acc<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">**</span>acc<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">[</span>cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">if</span> cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">in</span> acc <span class=\"token keyword\">else</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span>cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span><span class=\"token string\">'M'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Brett Holland'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Michael Jenkins'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Madison Martinez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Karen Rodriguez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Amber Rhodes'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"초기값의-중요성\" style=\"position:relative;\"><a href=\"#%EC%B4%88%EA%B8%B0%EA%B0%92%EC%9D%98-%EC%A4%91%EC%9A%94%EC%84%B1\" aria-label=\"초기값의 중요성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>초기값의 중요성</h2>\n<p><code>reduce()</code> 함수를 사용할 때 많은 분들이 실수하는 부분이 있는데 바로 초기값 세팅 유무에 따라 이상한 결과가 나올 수 있는 것입니다.</p>\n<p>예를 들어, 유저의 나이 합계를 구하는 예제에서 초기값으로 <code>0</code>을 넘겨주지 않으면 <code>TypeError</code>가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> acc<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">:</span> acc <span class=\"token operator\">+</span> cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">)</span>\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  File <span class=\"token string\">\"&lt;input>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span>\n    <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> acc<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">:</span> acc <span class=\"token operator\">+</span> cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">)</span>\n  File <span class=\"token string\">\"&lt;input>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">lambda</span><span class=\"token operator\">></span>\n    <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> acc<span class=\"token punctuation\">,</span> cur<span class=\"token punctuation\">:</span> acc <span class=\"token operator\">+</span> cur<span class=\"token punctuation\">[</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">)</span>\nTypeError<span class=\"token punctuation\">:</span> unsupported operand <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> <span class=\"token operator\">+</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'dict'</span> <span class=\"token keyword\">and</span> <span class=\"token string\">'int'</span></code></pre></div>\n<p>다른 예로, 유저 이름을 성별에 따라 분류하는 예제에서 초기값으로 빈 dictionary을 넘겨주지 않으면 다음과 같이 예상치못한 결과가 나옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span>names_by_sex<span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'gregorythomas@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Brett Holland'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">73</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Madison Martinez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n<span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'daniel79@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Karen Rodriguez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">32</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ujackson@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Amber Rhodes'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> 'hintoncynth\nia@hotmail<span class=\"token punctuation\">.</span>com<span class=\"token string\">', '</span>name<span class=\"token string\">': '</span>Madison Martinez<span class=\"token string\">', '</span>sex<span class=\"token string\">': '</span><span class=\"token string-interpolation\"><span class=\"token string\">F', '</span></span>age<span class=\"token string\">': 29}, {'</span>mail<span class=\"token string\">': '</span>daniel79@gmail<span class=\"token punctuation\">.</span>com<span class=\"token string\">', '</span>name<span class=\"token string\">': '</span>Karen Rodriguez<span class=\"token string\">', '</span>sex<span class=\"token string\">': '</span><span class=\"token string-interpolation\"><span class=\"token string\">F', '</span></span>age<span class=\"token string\">': 32}, {'</span>mail<span class=\"token string\">': '</span>ujackson@gmail<span class=\"token punctuation\">.</span>com'<span class=\"token punctuation\">,</span>\n <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Amber Rhodes'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'hintoncynthia@hotmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Madison Martinez'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'F'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'daniel79@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> 'Ka\nren Rodriguez<span class=\"token string\">', '</span>sex<span class=\"token string\">': '</span><span class=\"token string-interpolation\"><span class=\"token string\">F', '</span></span>age<span class=\"token string\">': 32}, {'</span>mail<span class=\"token string\">': '</span>ujackson@gmail<span class=\"token punctuation\">.</span>com<span class=\"token string\">', '</span>name<span class=\"token string\">': '</span>Amber Rhodes<span class=\"token string\">', '</span>sex<span class=\"token string\">': '</span><span class=\"token string-interpolation\"><span class=\"token string\">F', '</span></span>age<span class=\"token string\">': 42}, '</span>Madison Martinez<span class=\"token string\">', '</span>Karen Rodriguez<span class=\"token string\">', '</span>Amber Rhodes<span class=\"token string\">'], '</span>M'<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Michael Jenkins'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">51</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'wwagner@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Michael Jenkins'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sex'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">51</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">:</span> 'wwagner@g\nmail<span class=\"token punctuation\">.</span>com<span class=\"token string\">', '</span>name<span class=\"token string\">': '</span>Michael Jenkins<span class=\"token string\">', '</span>sex<span class=\"token string\">': '</span>M<span class=\"token string\">', '</span>age<span class=\"token string\">': 51}, '</span>Michael Jenkins'<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>이런 현상이 발생하는 이유는 <code>reduce()</code> 함수에 초기값을 넘기지 않으면 두번째 인자로 넘어온 list나 tuple의 첫번째 값이 초기값으로 사용되기 때문입니다.<br>본 예제에서 사용하고 있는 실습 데이터는 첫번째 값이 유저 정보를 담고 있는 dictionary이므로 이 값에 숫자를 더하거나, 키를 추가하려고 하니 문제가 발생하는 것입니다.</p>\n<h2 id=\"마치면서\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\" aria-label=\"마치면서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치면서</h2>\n<p>이상으로 여러 개의 데이터를 대상으로 주로 누적 집계를 내기 위해서 사용하는 파이썬의 <code>functools</code> 내장 모듈의 <code>reduce()</code> 함수에 대해서 알아보았습니다.<br><code>reduce()</code>는 파이썬의 내장 함수인 <code>map()</code>, <code>filter()</code>와 함께 함수형 프로그래밍에서는 매우 자주 사용되는 개념이니 잘 이해하시고 활용하셨으면 좋겠습니다.</p>","timeToRead":5,"fields":{"slug":"/python-functools-reduce/","tags":["Python","파이썬","functools","reduce","FP","FunctionalPrograming"]},"frontmatter":{"title":"파이썬 reduce 함수 사용법","date":"Mar 22, 2020"}},"next":{"fields":{"slug":"/python-filter/"},"frontmatter":{"title":"파이썬 filter 내장 함수 사용법 (feat. List Comprehension)"}}}}}