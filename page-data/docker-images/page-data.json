{"componentChunkName":"component---src-templates-detail-template-jsx","path":"/docker-images/","result":{"pageContext":{"previous":{"fields":{"slug":"/material-ui-typography/"},"frontmatter":{"title":"Material UI 소개 및 Typography 컴포넌트 사용법"}},"node":{"html":"<p>Docker CLI 도구는 Docker 이미지(image)의 효과적인 관리를 위해서 다양한 커맨드(command)를 제공합니다.\n이번 포스팅에서는 자주 쓰이는 커맨드 위주로 어떻게 Docker 이미지를 제어할 수 있는지 알아보도록 하겠습니다.</p>\n<h2 id=\"이미지-조회\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%A1%B0%ED%9A%8C\" aria-label=\"이미지 조회 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지 조회</h2>\n<p><code>docker images</code> 커맨드는 이미지를 조회할 때 사용됩니다.</p>\n<p>인자를 넘기지 않고 이 커맨드를 호출하면 전체 이미지 목록을 출력해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED              SIZE\ndaleseo/test        latest              8bae72379b48        About a minute ago   <span class=\"token number\">5</span>.6MB\nnode                current-slim        6d9a17519d40        <span class=\"token number\">12</span> days ago          140MB\nnode                latest              c31fbeb964cc        <span class=\"token number\">12</span> days ago          943MB\nnode                <span class=\"token number\">10</span>-alpine           34a10d47f150        <span class=\"token number\">2</span> weeks ago          <span class=\"token number\">83</span>.5MB\nnode                <span class=\"token number\">12</span>-alpine           f77abbe89ac1        <span class=\"token number\">2</span> weeks ago          <span class=\"token number\">88</span>.1MB\nbuntu               latest              4e5021d210f6        <span class=\"token number\">3</span> weeks ago          <span class=\"token number\">64</span>.2MB\nmysql               <span class=\"token number\">5.7</span>                 84164b03fa2e        <span class=\"token number\">5</span> weeks ago          456MB\nredis               latest              44d36d2c2374        <span class=\"token number\">2</span> months ago         <span class=\"token number\">98</span>.2MB\npython              <span class=\"token number\">3.8</span>-alpine          a0ee0c90a0db        <span class=\"token number\">2</span> months ago         109MB\npostgres            <span class=\"token number\">11</span>                  d3d96b1e5d48        <span class=\"token number\">3</span> months ago         332MB</code></pre></div>\n<p>특정 리파지토리(repository)에 해당하는 이미지만 필터링해서 보고 싶을 때는, 리파지토리를 인자로 넘겨주면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker images node\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nnode                current-slim        6d9a17519d40        <span class=\"token number\">12</span> days ago         140MB\nnode                latest              c31fbeb964cc        <span class=\"token number\">12</span> days ago         943MB\nnode                <span class=\"token number\">10</span>-alpine           34a10d47f150        <span class=\"token number\">2</span> weeks ago         <span class=\"token number\">83</span>.5MB\nnode                <span class=\"token number\">12</span>-alpine           f77abbe89ac1        <span class=\"token number\">2</span> weeks ago         <span class=\"token number\">88</span>.1MB</code></pre></div>\n<p>태그까지 인자로 넘기면 특정 이미지가 조회됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker images node:12-alpine\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nnode                <span class=\"token number\">12</span>-alpine           f77abbe89ac1        <span class=\"token number\">2</span> weeks ago         <span class=\"token number\">88</span>.1MB</code></pre></div>\n<h2 id=\"이미지-빌드\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B9%8C%EB%93%9C\" aria-label=\"이미지 빌드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지 빌드</h2>\n<p><code>docker build</code> 커맨드는 Docker 이미지를 빌드(build)할 때 사용됩니다.</p>\n<p>Docker 데몬이 이미지를 빌드하려면 소위 컨텍스트(context)라고도 불리는 Dockerfile을 담고 있는 디렉터리가 필요한데요.\nDockerfile은 보통 같은 디렉터리 안에 있는 설정 파일이나 소스 코드를 이용해서 이미지의 빌드 절차를 정의하기 때문입니다.</p>\n<p>예를 들어, 현재 작업 디렉터리를 기준으로 이미지를 빌드하려면 다음과 같이 커맨드를 실행합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>여기서 컨텍스트의 경로는 반드시 로컬 디렉터리일 필요는 없으며, 네트워크 상의 Git repository 주소나 압축 파일이 될 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build github.com/creack/docker-firefox</code></pre></div>\n<p><code>-t</code> 옵션을 사용하여 Docker 이미지에 태그(tag)를 설정해줄 수 있습니다.\n이미지에 태그를 설정하면 랜덤으로 결정되는 이미지 ID 대신에 태그를 이용해서 이미지를 제어할 수 있기 때문에 편리합니다.\n또한, 이미지를 Docker Hub와 같은 Docker repository에 올릴 때도 태그가 해당 이미지의 고유 식별자로 사용되기 때문에 중요합니다.</p>\n<p>태그는 <code>리파지토리(repository):태그(tag)</code> 형태로 지정이 가능하며, <code>태그</code> 부분을 생략하면 <code>latest</code>가 태그가 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t test:1.0 <span class=\"token builtin class-name\">.</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t daleseo/test <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p><code>-f</code> 옵션을 사용하면 디폴트인 <code>Dockerfile</code> 대신에 다른 파일로 부터 Docker 이미지를 빌드할 수 있습니다.</p>\n<p>예를 들어, 개발 환경에서 Docker 이미지의 빌드 절차가 상용 환경과 상이한 경우, 개발 환경 전용으로 <code>Dockerfile.dev</code>을 생성하고 다음과 같이 해당 파일을 바라보도록 해줄 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -f Dockerfile.dev <span class=\"token builtin class-name\">.</span></code></pre></div>\n<h2 id=\"이미지-태깅\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%83%9C%EA%B9%85\" aria-label=\"이미지 태깅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지 태깅</h2>\n<p>이미지 태깅은 이미지를 빌드 한 후에 별도로 해줄 수도 있는데, 이 때 <code>docker tag</code> 커맨드를 사용합니다.\n첫번째 인자로 이미지ID, 두번째 인자로 리파지토리 또는 태그까지 넘겨주면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker tag 8bae72379b48 <span class=\"token builtin class-name\">test</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker tag 8bae72379b48 test:2.0</code></pre></div>\n<h2 id=\"이미지-삭제\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%82%AD%EC%A0%9C\" aria-label=\"이미지 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지 삭제</h2>\n<p><code>docker rmi</code> 커맨드는 Docker 이미지를 삭제할 때 사용됩니다.</p>\n<p>삭제하려는 이미지의 ID나 태그를 인자로 넘겨주면 해당 이미지가 삭제가 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker rmi f77abbe89ac1</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker rmi node:12-alpine</code></pre></div>\n<p>종종, 하나의 이미지에 여러 개의 태그가 설정되어 있는 경우가 있는데요.</p>\n<p>예를 들어, 다음과 같이 이미지 ID <code>8bae72379b48</code>에 <code>test</code>, <code>test2</code>, <code>test3</code>이라는 3개의 태그가 설정되어 있다면,</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ntest2               latest              8bae72379b48        <span class=\"token number\">56</span> minutes ago      <span class=\"token number\">5</span>.6MB\ntest3               latest              8bae72379b48        <span class=\"token number\">56</span> minutes ago      <span class=\"token number\">5</span>.6MB\n<span class=\"token builtin class-name\">test</span>                latest              8bae72379b48        <span class=\"token number\">56</span> minutes ago      <span class=\"token number\">5</span>.6MB</code></pre></div>\n<p>이럴 때 태그를 인자로 넘기면 태그만 삭제되고 이미지는 삭제되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker rmi test3\nUntagged: test3:latest\n$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ntest2               latest              8bae72379b48        <span class=\"token number\">56</span> minutes ago      <span class=\"token number\">5</span>.6MB\n<span class=\"token builtin class-name\">test</span>                latest              8bae72379b48        <span class=\"token number\">56</span> minutes ago      <span class=\"token number\">5</span>.6MB</code></pre></div>\n<p>이럴 때는 <code>-f</code> 옵션을 주고 이미지 ID를 인자로 넘기면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker rmi -f 8bae72379b48\nUntagged: test2:latest\nUntagged: test:latest\nDeleted: sha256:8bae72379b48f8b03aac00811832f4e19c8b1027750301f3a4dd056704652afc</code></pre></div>\n<h2 id=\"마치면서\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\" aria-label=\"마치면서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치면서</h2>\n<p>지금까지 Docker 이미지 관리를 위해서 자주 쓰이는 CLI 커맨드에서 대해서 알아보았습니다.\n각 커맨드에 대한 좀 더 자세한 내용은 아래 Docekr CLI 레퍼런스를 참고바라겠습니다.</p>\n<ul>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/images/\">docker images</a></li>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/build/\">docker build</a></li>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/rmi/\">docker rmi</a></li>\n</ul>","timeToRead":4,"fields":{"slug":"/docker-images/","tags":["Docker","도커","image","이미지","Dockerfile","CLI"]},"frontmatter":{"title":"Docker 이미지 관련 커맨드 사용법","date":"Apr 12, 2020"}},"next":{"fields":{"slug":"/dockerfile/"},"frontmatter":{"title":"Dockerfile에서 자주 쓰이는 명령어"}}}},"staticQueryHashes":["2168229929","2362167539","3056348342"]}