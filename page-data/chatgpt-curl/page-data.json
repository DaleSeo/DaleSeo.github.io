{"componentChunkName":"component---src-templates-detail-template-jsx","path":"/chatgpt-curl/","result":{"pageContext":{"previous":{"fields":{"slug":"/chatgpt-cli-js/"},"frontmatter":{"title":"자바스크립트로 ChatGPT 터미널 앱 만들기"}},"node":{"html":"<p>이번 포스팅에서는 터미널에서 curl을 이용하여 ChatGPT API 직접 호출해보면서 ChatGPT와 어떻게 메시지를 주고 받을 수 있는지 알아보겠습니다.</p>\n<blockquote>\n<p>터미널에서 간단한 명령어를 입력하여 웹 페이지나 API 데이터를 요청하고 받을 수 있는 HTTP 클라이언트 도구인 curl에 대한 자세한 설명은 <a href=\"/curl/\">관련 포스팅</a>을 참고 바랍니다.</p>\n</blockquote>\n<h2 id=\"chatgpt-api-키-발급\" style=\"position:relative;\"><a href=\"#chatgpt-api-%ED%82%A4-%EB%B0%9C%EA%B8%89\" aria-label=\"chatgpt api 키 발급 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChatGPT API 키 발급</h2>\n<p>ChatGPT API를 사용하려면 반드시 OpenAI의 API 키가 있어야 합니다.\nAPI키가 없으신 분들은 <a href=\"/chatgpt-api-keys\">이전 글</a>을 따라서 OpenAI 웹사이트에 가입을 하시고 API 키를 발급받으시길 바랍니다.</p>\n<h2 id=\"chatgpt-api-key-설정\" style=\"position:relative;\"><a href=\"#chatgpt-api-key-%EC%84%A4%EC%A0%95\" aria-label=\"chatgpt api key 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChatGPT API Key 설정</h2>\n<p>터미널을 열고 우선 <code>OPENAI_API_KEY</code>라는 환경 변수에 OpenAI의 API 키를 저장해놓고 시작하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">OPENAI_API_KEY</span><span class=\"token operator\">=</span>sk-<span class=\"token punctuation\">..</span>.mn1a\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$OPENAI_API_KEY</span>\nsk-<span class=\"token punctuation\">..</span>.mn1a</code></pre></div>\n<p>이렇게 API 키를 환경 변수로 설정해놓으면 curl 명령어를 날릴 때 마다 매번 긴 문자열의 API 키를 명시할 필요가 없어서 편리합니다.\n환경 변수는 터미널 창을 닫으면 소멸되므로 실습을 진행되는 동안에는 같은 터미널 창을 사용하도록 주의하세요.</p>\n<h2 id=\"401-unauthorized\" style=\"position:relative;\"><a href=\"#401-unauthorized\" aria-label=\"401 unauthorized permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>401 Unauthorized</h2>\n<p>ChatGPT API의 주소(URL)는 <code>https://api.openai.com/v1/chat/completions</code> 인데요.</p>\n<p>우선 맛보기로 ChatGPT API를 <code>-i</code> 옵션만 줘서 <code>curl</code>로 그냥 찔러볼까요?\n<code>-i</code> 옵션을 사용하면 응답 헤더도 함께 출력해주기 때문에 유용합니다.</p>\n<div class=\"gatsby-code-title\">명령</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> https://api.openai.com/v1/chat/completions -i</code></pre></div>\n<p><code>401</code> 상태 코드와 함께 API 키를 제공하지 않았다는 오류 메시지가 응답이 되는데요.\nOpenAI의 API 키를 넘기지 않았으니 당연한 인증에 실패하는 거 겠죠?</p>\n<div class=\"gatsby-code-title\">결과</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">HTTP/2 <span class=\"token number\">401</span>\ndate: Wed, <span class=\"token number\">12</span> Apr <span class=\"token number\">2023</span> 02:43:09 GMT\ncontent-type: application/json<span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">charset</span><span class=\"token operator\">=</span>utf-8\ncontent-length: <span class=\"token number\">496</span>\nvary: Origin\nx-request-id: 6a95db70a1686a0bff8d160526276948\nstrict-transport-security: max-age<span class=\"token operator\">=</span><span class=\"token number\">15724800</span><span class=\"token punctuation\">;</span> includeSubDomains\ncf-cache-status: DYNAMIC\nserver: cloudflare\ncf-ray: 7b681ebfac6ea24c-YYZ\nalt-svc: <span class=\"token assign-left variable\">h3</span><span class=\"token operator\">=</span><span class=\"token string\">\":443\"</span><span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">ma</span><span class=\"token operator\">=</span><span class=\"token number\">86400</span>, h3-29<span class=\"token operator\">=</span><span class=\"token string\">\":443\"</span><span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">ma</span><span class=\"token operator\">=</span><span class=\"token number\">86400</span>\n\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"error\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"message\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"You didn't provide an API key. You need to provide your API key in an Authorization header using Bearer auth (i.e. Authorization: Bearer YOUR_KEY), or as the password field (with blank username) if you're accessing the API from your browser and are prompted for a username and password. You can obtain an API key from https://platform.openai.com/account/api-keys.\"</span>,\n        <span class=\"token string\">\"type\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"invalid_request_error\"</span>,\n        <span class=\"token string\">\"param\"</span><span class=\"token builtin class-name\">:</span> null,\n        <span class=\"token string\">\"code\"</span><span class=\"token builtin class-name\">:</span> null\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"400-bad-request\" style=\"position:relative;\"><a href=\"#400-bad-request\" aria-label=\"400 bad request permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>400 Bad Request</h2>\n<p>이번에는 ChatGPT API를 호출할 때 OpenAI의 API 키도 함께 실어서 보내볼까요?\n<code>curl</code> 명령어의 <code>-H</code> 옵션을 통해서 <code>Authorization</code> 헤더에 <code>Bearer &#x3C;API 키></code>의 형태로 지정해주면 됩니다.</p>\n<div class=\"gatsby-code-title\">명령</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> https://api.openai.com/v1/chat/completions -i <span class=\"token punctuation\">\\</span>\n  -H <span class=\"token string\">\"Authorization: Bearer <span class=\"token variable\">$OPENAI_API_KEY</span>\"</span></code></pre></div>\n<p>그러면 <code>400</code> 상태 코드와 함께 모델을 입력으로 보내지 않았다는 오류 메시지가 응답이 되네요.</p>\n<div class=\"gatsby-code-title\">결과</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">HTTP/2 <span class=\"token number\">400</span>\ndate: Wed, <span class=\"token number\">12</span> Apr <span class=\"token number\">2023</span> 02:48:33 GMT\ncontent-type: application/json<span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">charset</span><span class=\"token operator\">=</span>utf-8\ncontent-length: <span class=\"token number\">167</span>\nvary: Origin\nx-request-id: 6a892c4ca7886678871a9ba16530d7db\nstrict-transport-security: max-age<span class=\"token operator\">=</span><span class=\"token number\">15724800</span><span class=\"token punctuation\">;</span> includeSubDomains\ncf-cache-status: DYNAMIC\nserver: cloudflare\ncf-ray: 7b6826a5e8afa1f3-YYZ\nalt-svc: <span class=\"token assign-left variable\">h3</span><span class=\"token operator\">=</span><span class=\"token string\">\":443\"</span><span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">ma</span><span class=\"token operator\">=</span><span class=\"token number\">86400</span>, h3-29<span class=\"token operator\">=</span><span class=\"token string\">\":443\"</span><span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">ma</span><span class=\"token operator\">=</span><span class=\"token number\">86400</span>\n\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"error\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"message\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"you must provide a model parameter\"</span>,\n        <span class=\"token string\">\"type\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"invalid_request_error\"</span>,\n        <span class=\"token string\">\"param\"</span><span class=\"token builtin class-name\">:</span> null,\n        <span class=\"token string\">\"code\"</span><span class=\"token builtin class-name\">:</span> null\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>OpenAI는 <code>gpt-3.5-turbo</code>, <code>gpt-4</code> 등 여러가지 인공지능 모델을 제공하기 때문에 모델 종류를 필수적으로 명시해줘야 하는데요.\n저처럼 무료 크레딧으로 체험하시는데는 <code>gpt-3.5-turbo</code> 모델이면 충분할 것입니다.</p>\n<h2 id=\"200-ok\" style=\"position:relative;\"><a href=\"#200-ok\" aria-label=\"200 ok permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>200 OK</h2>\n<p>자, 이제 <code>curl</code> 명령어의 <code>-d</code> 옵션을 통해서 <code>gpt-3.5-turbo</code>라는 인공지능 모델을 사용하고 싶다고 명시해주고, <code>야!</code>라는 메시지도 입력해보겠습니다.</p>\n<div class=\"gatsby-code-title\">명령</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> https://api.openai.com/v1/chat/completions -i <span class=\"token punctuation\">\\</span>\n  -H <span class=\"token string\">\"Authorization: Bearer <span class=\"token variable\">$OPENAI_API_KEY</span>\"</span> <span class=\"token punctuation\">\\</span>\n  -H <span class=\"token string\">\"Content-Type: application/json\"</span> <span class=\"token punctuation\">\\</span>\n  -d <span class=\"token string\">'{\n     \"model\": \"gpt-3.5-turbo\",\n     \"messages\": [{\"role\": \"user\", \"content\": \"야!\"}]\n   }'</span></code></pre></div>\n<p>마침내 ChatGPT API가 <code>200</code> 상태 코드와 함께 정상적인 메시지를 응답하는 것을 보실 수 있으실 것입니다.\n(응답 메시지가 저랑 살짝 다를 수 있어요.)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">HTTP/2 <span class=\"token number\">200</span>\ndate: Wed, <span class=\"token number\">12</span> Apr <span class=\"token number\">2023</span> 03:00:04 GMT\ncontent-type: application/json\naccess-control-allow-origin: *\ncache-control: no-cache, must-revalidate\nopenai-model: gpt-3.5-turbo-0301\nopenai-organization: user-c0dbvszubcin3xsvakpwxd9n\nopenai-processing-ms: <span class=\"token number\">4079</span>\nopenai-version: <span class=\"token number\">2020</span>-10-01\nstrict-transport-security: max-age<span class=\"token operator\">=</span><span class=\"token number\">15724800</span><span class=\"token punctuation\">;</span> includeSubDomains\nx-ratelimit-limit-requests: <span class=\"token number\">20</span>\nx-ratelimit-remaining-requests: <span class=\"token number\">19</span>\nx-ratelimit-reset-requests: 3s\nx-request-id: 779c3612f7b428450cd286fc9f985d75\ncf-cache-status: DYNAMIC\nserver: cloudflare\ncf-ray: 7b68376ead9e3ffd-YYZ\nalt-svc: <span class=\"token assign-left variable\">h3</span><span class=\"token operator\">=</span><span class=\"token string\">\":443\"</span><span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">ma</span><span class=\"token operator\">=</span><span class=\"token number\">86400</span>, h3-29<span class=\"token operator\">=</span><span class=\"token string\">\":443\"</span><span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">ma</span><span class=\"token operator\">=</span><span class=\"token number\">86400</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"id\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"chatcmpl-74L0C0jSUWQN1zQU3jS46xgGUyMJq\"</span>,\n  <span class=\"token string\">\"object\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"chat.completion\"</span>,\n  <span class=\"token string\">\"created\"</span>:1681268400,\n  <span class=\"token string\">\"model\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"gpt-3.5-turbo-0301\"</span>,\n  <span class=\"token string\">\"usage\"</span>:<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"prompt_tokens\"</span>:10,\n    <span class=\"token string\">\"completion_tokens\"</span>:26,\n    <span class=\"token string\">\"total_tokens\"</span>:36\n  <span class=\"token punctuation\">}</span>,\n  <span class=\"token string\">\"choices\"</span>:<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"message\"</span>:<span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"role\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"assistant\"</span>,\n        <span class=\"token string\">\"content\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"예, 부르셨나요? 무엇을 도와드릴까요?\"</span>\n      <span class=\"token punctuation\">}</span>,\n      <span class=\"token string\">\"finish_reason\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"stop\"</span>,\n      <span class=\"token string\">\"index\"</span>:0\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"메시지-형식\" style=\"position:relative;\"><a href=\"#%EB%A9%94%EC%8B%9C%EC%A7%80-%ED%98%95%EC%8B%9D\" aria-label=\"메시지 형식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>메시지 형식</h2>\n<p>ChatGPT API와 메시지를 주고 받을 때는 정해진 형식을 따라야하는데요.\n우선 송수신 메시지 모두 배열의 형태이며 요청 전문의 <code>messages</code> 속성에 메시지를 담아서 보내면, 응답 전문의 <code>choices</code> 속성에 메시지가 담겨서 돌아옵니다.</p>\n<p>각 메시지는 <code>role</code> 속성과 <code>content</code> 속성으로 이루어지는데요.\n<code>role</code> 속성의 값은 <code>user</code>, <code>assistant</code>, <code>system</code> 역할 중 하나가 되며, <code>content</code> 속성에는 메시지 내용이 담깁니다.\n<code>user</code>는 우리 사용자를 나타내고, <code>assistant</code> 역할은 ChatGPT가 맡으며, <code>system</code>은 주로 대화 상황을 가정하는 특수한 용도로 쓰입니다.</p>\n<p>이렇게 한 번에 여러 메시지를 주고 받도록 설계된 이유는 ChatGPT API와 연속적인 대화를 하기 위함인데요.\nChatGPT API가 기존에 나누었던 대화의 맥락을 고려하기를 원한다면 ChatGPT API의 응답까지 포함해서 다시 ChatGPT API로 재전송할 수 있습니다.</p>\n<p>예를 들어, 서울의 인구를 물어볼 때 쌩뚱맞게 바로 <code>거기에서 가장 높은 건물이 뭐야?</code>라는 요청을 보내면 ChatGPT API는 구체적으로 질문을 달라고 응답할 것입니다.\n하지만, 다음과 같이 바로 전에 나누었던 질문과 대답을 함께 보내면 ChatGPT API는 좀 더 도움이 되는 응답을 보내줄 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gpt-3.5-turbo\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"messages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"role\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"한국의 수도가 어디야?\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"role\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"assistant\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"한국의 수도는 서울입니다.\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"role\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"거기에서 가장 높은 건물이 뭐야?\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ChatGPT가 보낸 메시지를 보면 이렇게 보통 assistant 롤이 사용됩니다.</p>\n<h2 id=\"토큰-사용량\" style=\"position:relative;\"><a href=\"#%ED%86%A0%ED%81%B0-%EC%82%AC%EC%9A%A9%EB%9F%89\" aria-label=\"토큰 사용량 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토큰 사용량</h2>\n<p>ChatGPT API의 응답 전문에서 자세히 보시면 <code>choices</code> 말고도 <code>usage</code>라는 속성이 보일텐데요.\n이 속성은 요청과 응답의 토큰 사용량과 둘은 합친 총 토큰 사용량을 알려주며 과금에 있어서 중요한 정보입니다.</p>\n<p>호출수에 따라 과금하는 기존 API들과 다르게 ChatGPT API는 이 토큰 사용량을 기준으로 과금을 합니다.\n예를 들어, 총 <code>36</code> 토큰을 사용한 요청은 <code>36 * 0.0002 = 0.0072</code> 달러가 과금되고, 총 <code>360</code> 토큰을 사용한 요청은 <code>360 * 0.0002 = 0.072</code> 달러가 과금됩니다.</p>\n<h2 id=\"마치면서\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\" aria-label=\"마치면서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치면서</h2>\n<p>이상으로 터미널에서 curl을 이용하여 실제로 ChatGPT API의 요청과 응답이 어떻게 생겼는지 살펴보았습니다.\n이렇게 curl을 잘 활용하면 간편하게 ChatGPT API를 찔러볼 수 있으므로 테스트 및 디버깅에 유용하게 활용할 수 있습니다.</p>\n<p>실제로 애플리케이션을 개발할 때는 OpenAPI에서 제공하는 라이브러리를 사용하게 될텐데요.\n이 부분에 대해서는 다음 포스팅에서 다뤄보도록 하겠습니다.</p>\n<blockquote>\n<p>ChatGPT에 대한 포스팅은 <a href=\"http://localhost:8000/?tag=ChatGPT\">관련 태그</a>를 통해서 쉽게 만나보세요! 😀</p>\n</blockquote>","timeToRead":6,"fields":{"slug":"/chatgpt-curl/","tags":["OpenAI","ChatGPT","API","curl"]},"frontmatter":{"title":"터미널에서 curl로 ChatGPT API 호출 해보기","date":"Apr 12, 2023"}},"next":{"fields":{"slug":"/chatgpt-api-keys/"},"frontmatter":{"title":"ChatGPT 앱 개발을 위한 API 키 발급 받기"}}}},"staticQueryHashes":["2168229929","2362167539","3056348342"]}