{
    "componentChunkName": "component---src-templates-detail-template-jsx",
    "path": "/github-actions-reusable-workflows/",
    "result": {"pageContext":{"previous":{"fields":{"slug":"/js-readable-stream/"},"frontmatter":{"title":"자바스크립트에서 데이터 스트림 읽기 (ReadableStream)"}},"node":{"html":"<p>GitHub Actions을 사용하다보면 시간이 지남에 다라 워크플로우가 점점 복잡해지고 그에 따라 중복되는 부분이 생기고 결국 워크플로우 유지보수가 어려워지게 되는데요.</p>\n<p>이번 포스팅에서는 GitHub Actions에서 워크플로우를 재사용하여 이러한 중복 설정 문제를 해결해보도록 하겠습니다.</p>\n<h2 id=\"실습-워크플로우-생성\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%83%9D%EC%84%B1\" aria-label=\"실습 워크플로우 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습 워크플로우 생성</h2>\n<p>실습을 위해서 자바스크립트 프로젝트의 전형적인 워크플로우 파일을 하나 작성해보았습니다.\n<code>main</code> 브랜치로 새로운 커밋(commit)이 유입되면 애플리케이션을 빌드하여 배포하는 작업을 수행되도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Our Deployment\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>main<span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> check out\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> set up node\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version-file</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\".nvmrc\"</span>\n          <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> npm\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> install\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm ci\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm test\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> build\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> deploy\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run deploy</code></pre></div>\n<p>6개의 단계(step)로 이루어진 <code>deploy</code> 작업(job)은 우선 프로젝트의 코드를 체크아웃 받고, 그 다음 Node.js와 npm 패키지를 설치하고, 테스트와 빌드 후에 마지막 배포까지 수행하게 됩니다.</p>\n<blockquote>\n<p>GitHub Actions를 사용하여 자바스크립트 프로젝트에서 CI를 구성하는 방법은 <a href=\"/github-actions-setup-node/\">관련 포스팅</a>을 참고 바랍니다.</p>\n</blockquote>\n<h2 id=\"환경-별로-작업-분리하기\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD-%EB%B3%84%EB%A1%9C-%EC%9E%91%EC%97%85-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"환경 별로 작업 분리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경 별로 작업 분리하기</h2>\n<p>실제 프로젝트에서 애플리케이션을 배포할 때는 보통 개발, QA, 상용처럼 여러 환경에 배포하게 되죠?</p>\n<p>이렇게 환경 별로 배포를 하기 위해서 <code>deploy</code> 작업을 <code>deploy-dev</code>, <code>deploy-qa</code>, <code>deploy-prod</code> 이렇게 3개의 작업으로 분리해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Our Deployment\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>main<span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">deploy-dev</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span> dev</span>    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> check out\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> set up node\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version-file</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\".nvmrc\"</span>\n          <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> npm\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> install\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm ci\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm test\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> build\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> deploy\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run deploy\n\n  <span class=\"token key atrule\">deploy-qa</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">needs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>deploy<span class=\"token punctuation\">-</span>dev<span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span> qa</span>    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> check out\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> set up node\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version-file</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\".nvmrc\"</span>\n          <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> npm\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> install\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm ci\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm test\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> build\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> deploy\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run deploy\n\n  <span class=\"token key atrule\">deploy-prod</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">needs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>deploy<span class=\"token punctuation\">-</span>qa<span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span> prod</span>    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> check out\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> set up node\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version-file</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\".nvmrc\"</span>\n          <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> npm\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> install\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm ci\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm test\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> build\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> deploy\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run deploy\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> notify</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo 'Deployment completed in prod<span class=\"token tag\">!</span> 🎉'</span></code></pre></div>\n<p>워크플로우 파일이 상당히 길어졌지만 사실 이 3개의 작업 간에는 대부분의 단계는 대동소이합니다.</p>\n<p>작업 간에 다른 부분은 <code>environment</code> 속성을 통해 각 작업의 다른 배포 환경을 지정하는 것 밖에 없고요.\n<code>deploy-dev</code>, <code>deploy-qa</code>, <code>deploy-prod</code> 순으로 작업이 수행되도록 <code>needs</code> 속성을 사용하여 작업 간의 의존 관계를 설정해주고 있습니다.</p>\n<blockquote>\n<p>GitHub Actions에서 작업 간에 실행 순서 제어하는 자세한 방법은 <a href=\"/github-actions-jobs/\">별도 포스팅</a>에서 다루고 있습니다.</p>\n</blockquote>\n<p>워크플로우 화면에 가시면 아래와 같이 3개이 작업이 순차적으로 실행된 것을 보실 수 있으실거에요.</p>\n<p><img src=\"https://res.cloudinary.com/daleseo/image/upload/v1688216078/github-actions-reusable-workflows-separate-job-by-env.png\" alt=\"separate-job-by-env\"></p>\n<h2 id=\"재사용-가능한-워크플로우-생성\" style=\"position:relative;\"><a href=\"#%EC%9E%AC%EC%82%AC%EC%9A%A9-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%83%9D%EC%84%B1\" aria-label=\"재사용 가능한 워크플로우 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>재사용 가능한 워크플로우 생성</h2>\n<p>위와 같이 유사한 작업을 구성하기 위해서 기존 작업을 복사해서 붙여넣기하는 대신에 워크플로우를 재사용할 수 있는데요.\nGitHub Actions에서 제공하는 재사용 워크플로우를 활용하여 워크플로우의 불필요한 중복을 방지함으로써 유지보수성을 향상시킬 수 있습니다.</p>\n<p>그럼 실습 워크플로우 내의 3개의 작업에서 반복적으로 설정되는 부분을 추출하여 재사용 가능한 워크플로우를 한번 만들어볼까요?\n재사용 워크플로우는 <code>workflow_call</code>이라는 이벤트에 반응하며 입력 인자를 정의해줄 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Our Reusable\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token key atrule\">workflow_call</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">inputs</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> string</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token key atrule\">required</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token key atrule\">notify</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> boolean</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span> inputs.env</span>    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> check out\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> set up node\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version-file</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\".nvmrc\"</span>\n          <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> npm\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> install\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm ci\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> test\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm test\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> build\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> deploy\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run deploy\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> notify\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> inputs.notify</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo 'Deployment completed in $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> inputs.env <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token tag\">!</span> 🎉'</span></code></pre></div>\n<p>입력 인자로 넘어온 문자열 자료형의 <code>env</code> 값을 그대로 <code>environment</code> 속성에 설정해주고,\n불리언 자료형의 <code>notify</code> 값이 <code>true</code>로 넘어왔을 때만 <code>notify</code> 단계를 실행하고 있습니다.</p>\n<h2 id=\"재사용-가능한-워크플로우-호출\" style=\"position:relative;\"><a href=\"#%EC%9E%AC%EC%82%AC%EC%9A%A9-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%ED%98%B8%EC%B6%9C\" aria-label=\"재사용 가능한 워크플로우 호출 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>재사용 가능한 워크플로우 호출</h2>\n<p>이제 위에서 만든 재사용 워크플로우를 기존 실습 워크플로우에 적용해 볼 차례인데요.</p>\n<p><code>uses</code> 속성을 통해서 각 작업에 재사용 워크플로우가 위치한 경로를 지정해줍니다.\n그리고 <code>with</code> 속성을 통해서 입력 인자를 명시해주면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Our Deployment\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>main<span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token key atrule\">deploy-dev</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> ./.github/workflows/reusable.yml</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span> dev</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token key atrule\">deploy-qa</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">needs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>deploy<span class=\"token punctuation\">-</span>dev<span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> ./.github/workflows/reusable.yml</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span> qa</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token key atrule\">deploy-prod</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">needs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>deploy<span class=\"token punctuation\">-</span>qa<span class=\"token punctuation\">]</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> ./.github/workflows/reusable.yml</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span> prod</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token key atrule\">notify</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></span></code></pre></div>\n<p>상용 배포에 대해서만 알람이 오도록 <code>deploy-prod</code> 작업에서만 <code>notify</code>를 <code>true</code>로 주고 있습니다.</p>\n<p>다시 워크플로우 화면에 가시면 동일한 3개의 작업이 재사용 워크플로우를 통해 실행된 것을 확인할 수 있으실 거에요.</p>\n<p><img src=\"https://res.cloudinary.com/daleseo/image/upload/v1688216078/github-actions-reusable-workflows-use-reusable-workflow.png\" alt=\"use-reusable-workflow\"></p>\n<h2 id=\"실습-코드\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%EC%BD%94%EB%93%9C\" aria-label=\"실습 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습 코드</h2>\n<p>본 포스팅에서 작성한 YAML 파일과 워크플로우 실행 결과는 아래 코드 저장소에서 확인하실 수 있습니다.</p>\n<ul>\n<li>Code: <a href=\"https://github.com/DaleSchool/github-actions-reusable-workflows\">https://github.com/DaleSchool/github-actions-reusable-workflows</a></li>\n<li>Actions: <a href=\"https://github.com/DaleSchool/github-actions-reusable-workflows/actions\">https://github.com/DaleSchool/github-actions-reusable-workflows/actions</a></li>\n</ul>\n<h2 id=\"마치면서\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\" aria-label=\"마치면서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치면서</h2>\n<p>지금까지 간단한 실습을 통해서 GitHub Actions에서 어떻게 재사용 가능한 워크플로우를 만들고 사용하는지 알아보았습니다.\n재사용 워크플로우를 잘 활용하셔서 워크플로우를 효과적으로 구성하고 관리하실 수 있으셨으면 좋겠습니다.</p>\n<blockquote>\n<p>GitHub Actions 관련 포스팅은 <a href=\"/?tag=GitHubActions\">GitHub Actions 태그</a>를 통해서 쉽게 만나보세요!</p>\n</blockquote>","timeToRead":5,"fields":{"slug":"/github-actions-reusable-workflows/","tags":["GitHub","GitHubActions","CI","CD"]},"frontmatter":{"title":"GitHub Actions에서 워크플로우 재사용하기","date":"Jun 30, 2023"}},"next":{"fields":{"slug":"/github-rest-api/"},"frontmatter":{"title":"깃허브의 REST API 호출 방법"}}}},
    "staticQueryHashes": ["2168229929","2362167539","3056348342"]}