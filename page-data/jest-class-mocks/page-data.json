{
    "componentChunkName": "component---src-templates-detail-template-jsx",
    "path": "/jest-class-mocks/",
    "result": {"pageContext":{"previous":{"fields":{"slug":"/swc/"},"frontmatter":{"title":"SWC(Speedy Web Compiler) ê¸°ë³¸ ì‚¬ìš©ë²•"}},"node":{"html":"<p>ES6ì—ì„œ í´ë˜ìŠ¤(class)ê°€ ë„ì…ë˜ê³  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ëŒ€ì¤‘í™”ë˜ë©´ì„œ ì´ì œ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ í”í•˜ê²Œ ë³¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\në¿ë§Œ ì•„ë‹ˆë¼ Angularë‚˜ NestJSì²˜ëŸ¼ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ í”„ë ˆì„ì›Œí¬ë„ ì ì  ëŠ˜ì–´ë‚˜ê³  ìˆì§€ìš”.\ní•˜ì§€ë§Œ ì•„ì§ í´ë˜ìŠ¤ë¥¼ ëª¨í‚¹í•˜ê±°ë‚˜ í…ŒìŠ¤íŒ…í•˜ì‹œëŠ”ë° ì–´ë ¤ì›€ì„ ê²ªëŠ” ê°œë°œì ë¶„ë“¤ì´ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>\n<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëŒ€í‘œì ì¸ í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬ì¸ Jestë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë˜ìŠ¤ë¥¼ ëª¨í‚¹(mocking)í•˜ê³  í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>ë³¸ í¬ìŠ¤íŒ…ì„ ì´í•´í•˜ì‹œë ¤ë©´ jest.fn(), jest.spyOn(), jest.mock()ê³¼ ê°™ì€ ëª¨í‚¹ê³¼ ê´€ë ¨ëœ Jestì˜ ê¸°ë³¸ ì§€ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì„ ìˆ˜ í•™ìŠµì´ í•„ìš”í•˜ì‹  ë¶„ë“¤ê»˜ëŠ” ì•„ë˜ í¬ìŠ¤íŒ…ì„ ì¶”ì²œë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"/jest-fn-spy-on/\">Jestì˜ jest.fn(), jest.spyOn()ë¥¼ ì´ìš©í•œ í•¨ìˆ˜ ëª¨í‚¹</a></li>\n<li><a href=\"/jest-mock/\">Jestì˜ jest.mock()ì„ ì´ìš©í•œ ëª¨ë“ˆ ëª¨í‚¹</a></li>\n</ul>\n</blockquote>\n<h2 id=\"í…ŒìŠ¤íŠ¸-ëŒ€ìƒ-í´ë˜ìŠ¤-ì‘ì„±\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%8C%80%EC%83%81-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%9E%91%EC%84%B1\" aria-label=\"í…ŒìŠ¤íŠ¸ ëŒ€ìƒ í´ë˜ìŠ¤ ì‘ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í…ŒìŠ¤íŠ¸ ëŒ€ìƒ í´ë˜ìŠ¤ ì‘ì„±</h2>\n<p>ê°„ë‹¨í•œ ì‹¤ìŠµì„ ìœ„í•´ì„œ <code>UsersService</code> í´ë˜ìŠ¤ì™€ <code>AuthService</code> í´ë˜ìŠ¤, ì´ë ‡ê²Œ ë‘ ê°œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ë¨¼ì € ì‚¬ìš©ì ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” <code>UsersService</code> í´ë˜ìŠ¤ì—ëŠ” <code>findByEmail()</code> ë©”ì„œë“œê°€ ìˆìŠµë‹ˆë‹¤.\nì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ API í˜¸ì¶œì„ í•´ì•¼ê² ì§€ë§Œ, ì‹¤ìŠµ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì„ì˜ë¡œ ë¬´ì‘ìœ„ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.\në’¤ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ë•Œ ì´ í´ë˜ìŠ¤ëŠ” ì–´ì°¨í”¼ ê°€ì§œ êµ¬í˜„ìœ¼ë¡œ ëª¨í‚¹(mocking)í•  ê²ƒì´ ë•Œë¬¸ì— ì‹¤ì œ êµ¬í˜„ì€ ê·¸ë‹¥ ì¤‘ìš”í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-code-title\">class-mock/users.service.ts</div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">User</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UsersService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">findByEmail</span><span class=\"token punctuation\">(</span>email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> User <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* ì„ì˜ë¡œ ê°€ì§œ ë°ì´í„°ê°€ ì¡°íšŒë˜ë„ë¡ êµ¬í˜„ */</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      id<span class=\"token operator\">:</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1_000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">,</span>\n      password<span class=\"token operator\">:</span> <span class=\"token string\">\"1234\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê·¸ ë‹¤ìŒ, ì¸ì¦ì„ ë‹´ë‹¹í•˜ëŠ” <code>AuthService</code> í´ë˜ìŠ¤ì—ëŠ” <code>logIn()</code> ë©”ì„œë“œê°€ ìˆìŠµë‹ˆë‹¤.\në¡œê·¸ì¸ ì²˜ë¦¬ë¥¼ í•˜ë ¤ë©´ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ë°›ì•„ì„œ ì‚¬ìš©ìë¥¼ ì¡°íšŒí•´ì•¼í•˜ ë•Œë¬¸ì—, <code>AuthService</code> í´ë˜ìŠ¤ëŠ” <code>UserService</code> í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n<code>AuthService</code> í´ë˜ìŠ¤ì˜ <code>logIn()</code> ë©”ì„œë“œëŠ” <code>UserService</code> í´ë˜ìŠ¤ì˜ <code>findByEmail()</code> ë©”ì„œë“œê°€ ì‚¬ìš©ìë¥¼ ì°¾ì§€ ëª»í•˜ê±°ë‚˜, ì¸ìë¡œ ë„˜ì–´ì˜¨ ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•Šìœ¼ë©´ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.\nì‚¬ìš©ìê°€ ë¬¸ì œì—†ì´ ì¡°íšŒëœ ê²½ìš°ì—ëŠ” ì°¾ì€ ì‚¬ìš©ìë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-code-title\">class-mock/auth.service.ts</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UsersService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthService</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> usersService<span class=\"token operator\">:</span> UsersService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span>email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>usersService<span class=\"token punctuation\">.</span><span class=\"token function\">findByEmail</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Not Found\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>password <span class=\"token operator\">!==</span> password<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Wrong Password\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì—¬ê¸°ì„œ í…ŒìŠ¤íŒ… ì¸¡ë©´ì—ì„œ í•œ ê°€ì§€ ì£¼ì˜ê¹Šê²Œ ë³¼ ë¶€ë¶„ì€ <code>AuthService</code> í´ë˜ìŠ¤ëŠ” ìƒì„±ìë¥¼ í†µí•´ì„œ <code>UsersService</code> í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n<a href=\"/?tag=NestJS\">NestJS</a>ì™€ ê°™ì€ DI(Dependency Injection, ì˜ì¡´ì„± ì£¼ì…) í”„ë ˆì„ì›Œí¬ì—ì„œ ë§ì´ ë³¼ ìˆ˜ ìˆëŠ” ì„¤ê³„ íŒ¨í„´ì…ë‹ˆë‹¤.</p>\n<p>ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ëª¨í‚¹í•œ í´ë˜ìŠ¤ì˜ ê°€ì§œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§¤ìš° ìœ ì—°í•˜ê²Œ ì£¼ì…í•  ìˆ˜ ìˆëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"í´ë˜ìŠ¤ì˜-ì¸ìŠ¤í„´ìŠ¤-ëª¨í‚¹\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9E%98%EC%8A%A4%EC%9D%98-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%AA%A8%ED%82%B9\" aria-label=\"í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ëª¨í‚¹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ëª¨í‚¹</h2>\n<p>í´ë˜ìŠ¤ë¥¼ ëª¨í‚¹í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëª¨í‚¹í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\nìœ„ì™€ ê°™ì´ ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ì„¤ê³„ë˜ì–´ ìˆë‹¤ë©´ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ì†ì‰½ê²Œ ê°€ì§œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, <code>AuthService</code> í´ë˜ìŠ¤ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ì„œ <code>UsersService</code> í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëª¨í‚¹í•´ë³¼ê¹Œìš”?\n<code>UsersService</code> í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê²°êµ­ì—ëŠ” <code>findByEmail()</code> ë©”ì„œë“œë¥¼ ì†ì„±ìœ¼ë¡œ ê°–ëŠ” ê°ì²´ì´ê¸° ë•Œë¬¸ì—, ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ í•˜ë‚˜ ë§Œë“¤ê³  <code>findByEmail</code> ì†ì„±ì— <code>jest.fn()</code> í•¨ìˆ˜ë¥¼ í• ë‹¹í•´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-code-title\">class-mock/auth.service1.test.ts</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./auth.service\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UsersService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AuthService\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">let</span> usersService<span class=\"token operator\">:</span> UsersService<span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">let</span> authService<span class=\"token operator\">:</span> AuthService<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    usersService <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> findByEmail<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>    authService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthService</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if user is not found\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"NOT_FOUND\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Not Found\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if password does not match\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      password<span class=\"token operator\">:</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"WRONG_PASSWORD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Wrong Password\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"returns a user if password matches\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      password<span class=\"token operator\">:</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveProperty</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token number\">200</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìœ„ ì½”ë“œë¥¼ ë³´ì‹œë©´ ëª¨í‚¹ëœ <code>findByEmail()</code> í•¨ìˆ˜ê°€ íŠ¹ì • ì‚¬ìš©ì ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •í•  ë•Œë§ˆë‹¤ <code>as</code> í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ <code>jest.Mock</code> íƒ€ì…ìœ¼ë¡œ íƒ€ì…ì„ ê°•ì œí•´ì£¼ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në”°ë¼ì„œ ì´ ë°©ë²•ì€ íƒ€ì… ì•ˆì „(type-safe)í•˜ì§€ ì•Šìœ¼ë©° íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ë•ŒëŠ” ê¶Œì¥ë˜ì§€ ì•ŠëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>\n<p>ë¿ë§Œ ì•„ë‹ˆë¼, ë§Œì•½ê²Œ <code>UsersService</code> í´ë˜ìŠ¤ê°€ ì—¬ëŸ¬ ê°œì˜ ë©”ì„œë“œë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤ë©´, ì¼ì¼ì´ ì¸ìŠ¤í„´ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œë¥¼ <code>jest.fn()</code>ìœ¼ë¡œ í• ë‹¹í•´ì£¼ëŠ” ê²ƒì´ ìƒë‹¹íˆ ë²ˆê±°ë¡œì› ì„ ê²ƒì…ë‹ˆë‹¤.</p>\n<p>ë” ë‚˜ì€ ë°©ë²•ì€ ì—†ì„ê¹Œìš”?</p>\n<h2 id=\"jest-mock-extended-íŒ¨í‚¤ì§€\" style=\"position:relative;\"><a href=\"#jest-mock-extended-%ED%8C%A8%ED%82%A4%EC%A7%80\" aria-label=\"jest mock extended íŒ¨í‚¤ì§€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>jest-mock-extended íŒ¨í‚¤ì§€</h2>\n<p>ìœ„ì—ì„œ ì„¤ëª…ë“œë¦° ë¬¸ì œëŠ” <code>jest-mock-extended</code> íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nìš°ì„  npm ì €ì¥ì†Œë¡œ ë¶€í„° <code>jest-mock-extended</code> íŒ¨í‚¤ì§€ë¥¼ ë‚´ë ¤ ë°›ì•„ì„œ ì‹¤ìŠµ í”„ë¡œì íŠ¸ì— ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>Node.js í”„ë¡œì íŠ¸ì—ì„œëŠ” í„°ë¯¸ë„ì—ì„œ <code>npm add</code> ëª…ë ¹ì–´ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-D</span> jest-mock-extended</code></pre></div>\n<p><a href=\"/?tag=Bun\">Bun</a>ì„ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œëŠ” <code>bun add</code> ëª…ë ¹ì–´ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bun <span class=\"token function\">add</span> <span class=\"token parameter variable\">-D</span> jest-mock-extended</code></pre></div>\n<p><code>jest-mock-extended</code> íŒ¨í‚¤ì§€ì—ì„œ ì œê³µí•˜ëŠ” <code>mock()</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ê°„í¸í•˜ê²Œ ê°€ì§œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê·¸ë¦¬ê³  <code>jest-mock-extended</code> íŒ¨í‚¤ì§€ì—ì„œ ì œê³µí•˜ëŠ” <code>MockProxy</code>ë¡œ <code>mock()</code> í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” ê°€ì§œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ íƒ€ì…ì„ ì§€ì •í•´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-code-title\">class-mock/auth.service2.test.ts</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">MockProxy</span><span class=\"token punctuation\">,</span> mock <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"jest-mock-extended\"</span><span class=\"token punctuation\">;</span></span><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./auth.service\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UsersService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AuthService\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">let</span> usersService<span class=\"token operator\">:</span> MockProxy<span class=\"token operator\">&lt;</span>UsersService<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">let</span> authService<span class=\"token operator\">:</span> AuthService<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    usersService <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">mock</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>UsersService<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    authService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthService</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if user is not found\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"NOT_FOUND\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Not Found\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if password does not match\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      password<span class=\"token operator\">:</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"WRONG_PASSWORD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Wrong Password\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"returns a user if password matches\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      password<span class=\"token operator\">:</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveProperty</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token number\">200</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ì œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ë¶€í„° <code>as jest.Mock</code>ì´ ëª¨ë‘ ì‚¬ë¼ì ¸ íƒ€ì… ì•ˆì „í•´ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ‰</p>\n<h2 id=\"ì˜ì¡´ì„±-ì£¼ì…ì´-ë¶ˆê°€ëŠ¥-í•˜ë‹¤ë©´\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85%EC%9D%B4-%EB%B6%88%EA%B0%80%EB%8A%A5-%ED%95%98%EB%8B%A4%EB%A9%B4\" aria-label=\"ì˜ì¡´ì„± ì£¼ì…ì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤ë©´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì˜ì¡´ì„± ì£¼ì…ì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤ë©´?</h2>\n<p>ë§Œì•½ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ì—†ëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì–´ ìˆë‹¤ë©´ ì–´ë–»ê²Œ í• ê¹Œìš”?</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´ì„œ, <code>AuthService</code> í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•´ë³´ê² ìŠµë‹ˆë‹¤.\nì´ ì „ì—ëŠ” í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ <code>UsersService</code> í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë„˜ê¸¸ ìˆ˜ ìˆì—ˆëŠ”ë°, ì´ ë²ˆì—ëŠ” ìƒì„±ì ì•ˆì—ì„œ <code>UsersService</code> í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ì ‘ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-code-title\">module-mock/auth.service.ts</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UsersService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthService</span> <span class=\"token punctuation\">{</span>\n  usersService<span class=\"token operator\">:</span> UsersService<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>usersService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsersService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span>email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>usersService<span class=\"token punctuation\">.</span><span class=\"token function\">findByEmail</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Not Found\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>password <span class=\"token operator\">!==</span> password<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Wrong Password\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì•„ì§ ìë°”ìŠ¤í¬ë¦½íŠ¸ ìƒíƒœê³„ì—ì„œ ì˜ì¡´ì„± ì£¼ì…ì´ ëŒ€ì„¸ê°€ ëœì§€ê°€ ì˜¤ë˜ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì‘ì„±ëœ ë ˆê±°ì‹œ ì½”ë“œê°€ ë§ì„ ê±°ì—ìš”.\nì´ëŸ° ê²½ìš°ì—ëŠ” ì–´ì©” ìˆ˜ ì—†ì´ <code>UsersService</code> í´ë˜ìŠ¤ë¥¼ ë‹´ê³  ìˆëŠ” <code>./users.service</code> ëª¨ë“ˆì„ ëª¨í‚¹í•´ì•¼ ë˜ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì¢€ ë” ê¹Œë‹¤ë¡œì›Œì§‘ë‹ˆë‹¤.</p>\n<h2 id=\"í´ë˜ìŠ¤ì˜-ê°€ì§œ-ì¸ìŠ¤í„´ìŠ¤-ì ‘ê·¼\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9E%98%EC%8A%A4%EC%9D%98-%EA%B0%80%EC%A7%9C-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%A0%91%EA%B7%BC\" aria-label=\"í´ë˜ìŠ¤ì˜ ê°€ì§œ ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í´ë˜ìŠ¤ì˜ ê°€ì§œ ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼</h2>\n<p>Jestì—ì„œ ëª¨ë“ˆì„ ëª¨í‚¹í•  ë•ŒëŠ” <code>jest.mock()</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©°, í•´ë‹¹ ëª¨ë“ˆì´ ë‚´ë³´ë‚´ëŠ” ëª¨ë“  í´ë˜ìŠ¤ì˜ ìƒì„±ìëŠ” ê°€ì§œ í•¨ìˆ˜ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤.</p>\n<p>í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì´ ê°€ì§œ ìƒì„±ìë¡œ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ <code>mock.instances</code> ë°°ì—´ì— ì €ì¥ì´ ë©ë‹ˆë‹¤.\në”°ë¼ì„œ ìš°ë¦¬ëŠ” ì´ ë°°ì—´ì„ í†µí•´ì„œ ì›í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼ í›„ì— íŠ¹ì • ë©”ì„œë“œê°€ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, ì‹¤ìŠµ í”„ë¡œì íŠ¸ì—ì„œ <code>AuthService</code> í´ë˜ìŠ¤ëŠ” ìƒì„±ì ë‚´ì—ì„œ <code>UsersService</code> í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë”± í•œ ë²ˆ ìƒì„±ë˜ë¯€ë¡œ, <code>UsersService.mock.instances[0]</code>ì„ í†µí•´ì„œ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.</p>\n<p>ì—¬ê¸°ì„œ <code>UsersService.mock.instances</code> ë°°ì—´ì— <code>UsersService</code> í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ëˆ„ì ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤.\nì´ë¥¼ ìœ„í•´ì„œ <code>beforeEach()</code> í•¨ìˆ˜ ë‚´ì—ì„œ <code>UsersService</code> í´ë˜ìŠ¤ë¥¼ ìƒëŒ€ë¡œ <code>mockClear()</code> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-code-title\">module-mock/auth.service1.test.ts</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./auth.service\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UsersService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">jest<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AuthService\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> usersService<span class=\"token operator\">:</span> UsersService<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> authService<span class=\"token operator\">:</span> AuthService<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">(</span>UsersService <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockClear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    authService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    usersService <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>UsersService <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mock<span class=\"token punctuation\">.</span>instances<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if user is not found\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"NOT_FOUND\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Not Found\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if password does not match\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      password<span class=\"token operator\">:</span> <span class=\"token string\">\"RIGHT\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"WRONG\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Wrong Password\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"returns a user if password matches\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      password<span class=\"token operator\">:</span> <span class=\"token string\">\"RIGHT\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"RIGHT\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveProperty</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token number\">200</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>usersService<span class=\"token punctuation\">.</span>findByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìœ„ ì½”ë“œë¥¼ ë³´ì‹œë©´ ëª¨í‚¹ëœ <code>findByEmail()</code> í•¨ìˆ˜ë¥¼ ì„¤ì •í•˜ê±°ë‚˜ ì •ë¦¬(clear)í•  ë•Œ ë§ˆë‹¤ <code>as</code> í‚¤ì›Œë“œë¡œ íƒ€ì…ì„ <code>jest.Mock</code>ìœ¼ë¡œ ê°•ì œí•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.\n<code>jest.mock()</code> í•¨ìˆ˜ë¡œ ëª¨ë“ˆ ëª¨í‚¹ì„ í•´ì£¼ì—ˆì§€ë§Œ ì—¬ì „íˆ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ëŸ¬ëŠ” <code>usersService</code> ë³€ìˆ˜ì˜ íƒ€ì…ì´ <code>UsersService</code>ë¼ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>\n<h2 id=\"í´ë˜ìŠ¤ì˜-í”„ë¡œí† íƒ€ì…-ìŠ¤íŒŒì´\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9E%98%EC%8A%A4%EC%9D%98-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85-%EC%8A%A4%ED%8C%8C%EC%9D%B4\" aria-label=\"í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì… ìŠ¤íŒŒì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì… ìŠ¤íŒŒì´</h2>\n<p>í´ë˜ìŠ¤ë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ì˜ì¡´ì„± ì£¼ì…ì´ ë¶ˆê°€ëŠ¥í•œ ìƒí™©ì—ì„œ í´ë˜ìŠ¤ë¥¼ ëª¨í‚¹í•  ìˆ˜ ìˆëŠ” ë‘ ë²ˆì§¸ ë°©ë²•ì€ í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì…ì„ <code>jest.spyOn()</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤íŒŒì´(spy)í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, <code>UsersService</code> í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì…ì˜ <code>findByEmail()</code> í•¨ìˆ˜ë¥¼ ìŠ¤íŒŒì´í•˜ì—¬ í…ŒìŠ¤íŠ¸ ìš© ì‚¬ìš©ì ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ë§Œë“¤ì–´ì£¼ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-code-title\">module-mock/auth.service2.test.ts</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./auth.service\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UsersService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">jest<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AuthService\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> authService<span class=\"token operator\">:</span> AuthService<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">(</span>UsersService<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>findByEmail <span class=\"token keyword\">as</span> jest<span class=\"token punctuation\">.</span>Mock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockReset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    authService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if user is not found\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> mockFindByEmail <span class=\"token operator\">=</span> jest</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>UsersService<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">\"findByEmail\"</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"NOT_FOUND\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Not Found\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if password does not match\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> mockFindByEmail <span class=\"token operator\">=</span> jest</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>UsersService<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">\"findByEmail\"</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        password<span class=\"token operator\">:</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"WRONG_PASSWORD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Wrong Password\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"returns a user if password matches\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> mockFindByEmail <span class=\"token operator\">=</span> jest</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>UsersService<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">\"findByEmail\"</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        password<span class=\"token operator\">:</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveProperty</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token number\">200</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œëŠ” ê° í…ŒìŠ¤íŠ¸ì—ì„œ ëª¨í‚¹ëœ <code>UsersService</code> í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì…ì˜ <code>findByEmail()</code> í•¨ìˆ˜ë¥¼ ì´ˆê¸°í™”(reset)í•˜ì—¬ í…ŒìŠ¤íŠ¸ ê°„ì— ì„œë¡œ ê°„ì„­ì´ ì¼ì–´ë‚˜ì§€ ì•Šë„ë¡ í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"í´ë˜ìŠ¤ì˜-ìƒì„±ì-ëª¨í‚¹\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9E%98%EC%8A%A4%EC%9D%98-%EC%83%9D%EC%84%B1%EC%9E%90-%EB%AA%A8%ED%82%B9\" aria-label=\"í´ë˜ìŠ¤ì˜ ìƒì„±ì ëª¨í‚¹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í´ë˜ìŠ¤ì˜ ìƒì„±ì ëª¨í‚¹</h2>\n<p>ë˜ ë‹¤ë¥¸ ì ‘ê·¼ ë°©ë²•ìœ¼ë¡œ <code>jest.mock()</code> í•¨ìˆ˜ë¡œ ëª¨ë“ˆì„ ëª¨í‚¹í•  ë•Œ í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ ëª¨í‚¹í•˜ëŠ” ê²ƒë„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<code>jest.mock()</code> í•¨ìˆ˜ì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ ê°€ì§œ êµ¬í˜„ì„ ë°˜í™˜í•˜ëŠ” íŒ©í† ë¦¬ í•¨ìˆ˜ë¥¼ ë„˜ê¸°ë©´, í•´ë‹¹ ëª¨ë“ˆì´ ê°€ì§œ êµ¬í˜„ìœ¼ë¡œ ì™„ì „íˆ ëŒ€ì²´ë©ë‹ˆë‹¤.</p>\n<p>í´ë˜ìŠ¤ì˜ ìƒì„±ìë„ ê²°êµ­ì—ëŠ” ì •í•´ì§„ ë©”ì„œë“œë¥¼ ì†ì„±ìœ¼ë¡œ ê°–ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ í•¨ìˆ˜ì¼ ë¿ì…ë‹ˆë‹¤.\nì´ ê²ƒì„ ì°©ì•ˆí•˜ë©´ í´ë˜ìŠ¤ë¥¼ ë‚´ë³´ë‚´ëŠ” ëª¨ë“ˆì„ ê°€ì§œ êµ¬í˜„ìœ¼ë¡œ ëŒ€ì²´í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, <code>UsersService</code> í´ë˜ìŠ¤ë¥¼ ë‚´ë³´ë‚´ëŠ” <code>./auth.service</code> ëª¨ë“ˆì„ ëŒ€ì²´ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.\n<code>findByEmail</code> ì†ì„±ì˜ ê°’ìœ¼ë¡œ <code>jest.fn()</code>ì´ ë°˜í™˜í•˜ëŠ” ê°€ì§œ í•¨ìˆ˜ë¥¼ í• ë‹¹í•´ì¤ë‹ˆë‹¤.\nê·¸ë¦¬ê³  ê° í…ŒìŠ¤íŠ¸ì—ì„œ ëª¨í‚¹ëœ <code>findByEmail()</code> í•¨ìˆ˜ê°€ í…ŒìŠ¤íŠ¸ ìš© ì‚¬ìš©ì ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-code-title\">module-mock/auth.service3.test.ts</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./auth.service\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> mockFindByEmail <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">jest<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./users.service\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    UsersService<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> findByEmail<span class=\"token operator\">:</span> mockFindByEmail <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AuthService\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> authService<span class=\"token operator\">:</span> AuthService<span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    mockFindByEmail<span class=\"token punctuation\">.</span><span class=\"token function\">mockReset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    authService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if user is not found\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    mockFindByEmail<span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"NOT_FOUND\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Not Found\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"throws an error if password does not match\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    mockFindByEmail<span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      password<span class=\"token operator\">:</span> <span class=\"token string\">\"RIGHT\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"WRONG_PASSWORD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toThrow</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Wrong Password\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"returns a user if password matches\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    mockFindByEmail<span class=\"token punctuation\">.</span><span class=\"token function\">mockReturnValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      id<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      email<span class=\"token operator\">:</span> <span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      password<span class=\"token operator\">:</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>authService<span class=\"token punctuation\">.</span><span class=\"token function\">logIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"PASSWORD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveProperty</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token number\">200</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockFindByEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test@email.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì—¬ê¸°ì„œ í•œ ê°€ì§€ ì£¼ì˜í•  ì ì´ ìˆëŠ”ë° ê°€ì§œ í•¨ìˆ˜ì˜ ì´ë¦„ì€ ì‹¤ìŠµ ì½”ë“œì˜ <code>mockFindByEmail</code>ì²˜ëŸ¼ ë°˜ë“œì‹œ <code>mock</code>ìœ¼ë¡œ ì‹œì‘í•´ì•¼í•©ë‹ˆë‹¤.\nJestê°€ <code>jest.mock()</code> í•¨ìˆ˜ì˜ í˜¸ì¶œì„ ë§¨ ìœ„ë¡œ ì˜¬ë¦´(hoist) ë•Œ, <code>mock</code>ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ë§Œ ê°™ì´ ì˜¬ë ¤ì£¼ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>\n<h2 id=\"ì‹¤ìŠµ-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%EC%BD%94%EB%93%9C\" aria-label=\"ì‹¤ìŠµ ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì‹¤ìŠµ ì½”ë“œ</h2>\n<p>ì‹¤ìŠµ í”„ë¡œì íŠ¸ì˜ ì½”ë“œëŠ” ì•„ë˜ì—ì„œ ì§ì ‘ í™•ì¸í•˜ê³  ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<iframe src=\"https://stackblitz.com/edit/jest-class-mocks?embed=1&file=src%2Fclass-mock%2Fauth.service2.test.ts&view=editor\"\nstyle=\"width:100%; height:600px; border:0; border-radius: 4px; overflow:hidden;\"></iframe>\n<h2 id=\"ë§ˆì¹˜ë©´ì„œ\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\" aria-label=\"ë§ˆì¹˜ë©´ì„œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆì¹˜ë©´ì„œ</h2>\n<p>ì§€ê¸ˆê¹Œì§€ Jestë¥¼ ì´ìš©í•˜ì—¬ ìë°”ìŠ¤í¬ë¦½íŠ¸/íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ í´ë˜ìŠ¤ë¥¼ ëª¨í‚¹í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ì ‘ê·¼ ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.</p>\n<p>í´ë˜ìŠ¤ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ì‹¤ ë•ŒëŠ” ê°€ê¸‰ì  <code>jest.mock()</code>ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“ˆì„ ëª¨í‚¹í•˜ê¸° ë³´ë‹¤ëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ ê°€ëŠ¥í•˜ë„ë¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§(refactoring)í•´ë³´ì‹œë¼ê³  ì¶”ì²œë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤.\nì• ì´ˆì— í´ë˜ìŠ¤ ê°„ì— ëŠìŠ¨í•˜ê²Œ ê²°í•©ë˜ë„ë¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì˜ êµ¬ì¡°ê°€ ì¡í˜€ ìˆìœ¼ë©´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ìˆ˜ì›”í•´ì§€ê³  í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìœ ì§€ë³´ìˆ˜í•˜ê¸°ë„ ì¢‹ì„ ê²ƒì…ë‹ˆë‹¤.</p>\n<blockquote>\n<p>Jestì— ì—°ê´€ëœ í¬ìŠ¤íŒ…ì€ <a href=\"/?tag=Jest\">Jest íƒœê·¸</a>ë¥¼ í†µí•´ì„œ ì‰½ê²Œ ë§Œë‚˜ë³´ì„¸ìš”!</p>\n</blockquote>","timeToRead":12,"fields":{"slug":"/jest-class-mocks/","tags":["JavaScript","library","Jest","testing","Mock","mocking"]},"frontmatter":{"title":"Jestë¥¼ ì´ìš©í•œ í´ë˜ìŠ¤ ëª¨í‚¹ê³¼ í…ŒìŠ¤íŒ…","date":"Dec 27, 2023"}},"next":{"fields":{"slug":"/vitest/"},"frontmatter":{"title":"Vitest ì²˜ìŒ ì‹œì‘í•˜ê¸°"}}}},
    "staticQueryHashes": ["2168229929","2362167539","3056348342"]}