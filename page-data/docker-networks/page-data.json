{"componentChunkName":"component---src-templates-detail-template-jsx","path":"/docker-networks/","result":{"pageContext":{"previous":{"fields":{"slug":"/unified-remark-rehype/"},"frontmatter":{"title":"Markdown을 HTML로 변환 (unified, remark, rehype)"}},"node":{"html":"<p>Docker 컨테이너(container)는 격리된 환경에서 돌아가기 때문에 기본적으로 다른 컨테이너와의 통신이 불가능합니다.<br>하지만 여러 개의 컨테이너를 하나의 Docker 네트워크(network)에 연결시키면 서로 통신이 가능해집니다.<br>이번 포스트에서는 컨테이너 간 네트워킹이 가능하도록 도와주는 Docker 네트워크에 대해서 알아보도록 하겠습니다.</p>\n<h2 id=\"네트워크-조회\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%A1%B0%ED%9A%8C\" aria-label=\"네트워크 조회 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크 조회</h2>\n<p>Docker 네트워크의 기본은 내 컴퓨터에서 어떤 네트워크가 생성되어 있는지를 아는 것일 겁니다.<br><code>docker network ls</code> 커맨드를 사용하면 현재 생성되어 있는 Docker 네트워크 목록을 조회할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network <span class=\"token function\">ls</span>\nNETWORK ID          NAME                DRIVER              SCOPE\n143496b94e57        bridge              bridge              <span class=\"token builtin class-name\">local</span>\n311d6534f79f        <span class=\"token function\">host</span>                <span class=\"token function\">host</span>                <span class=\"token builtin class-name\">local</span>\naa89f58200a6        none                null                <span class=\"token builtin class-name\">local</span></code></pre></div>\n<p><code>bridge</code>, <code>host</code>, <code>none</code>은 Docker 데몬(daemon)이 실행되면서 디폴트로 생성되는 네트워크입니다.<br>대부분의 경우에는 이러한 디폴트 네트워크를 이용하는 것 보다는 사용자가 직접 네트워크를 생성해서 사용하는 것이 권장됩니다.</p>\n<h2 id=\"네트워크-종류\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%A2%85%EB%A5%98\" aria-label=\"네트워크 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크 종류</h2>\n<p>Docker 네트워크는 <code>bridge</code>, <code>host</code>, <code>overlay</code> 등 목적에 따라 다양한 종류의 네트워크 드라이버(driver)를 지원하는데요.</p>\n<ul>\n<li><code>bridge</code> 네트워크는 하나의 호스트 컴퓨터 내에서 여러 컨테이너들이 서로 소통할 수 있도록 해줍니다.</li>\n<li><code>host</code> 네트워크는 컨터이너를 호스트 컴퓨터와 동일한 네트워크에서 컨테이너를 돌리기 위해서 사용됩니다.</li>\n<li><code>overlay</code> 네트워크는 여러 호스트에 분산되어 돌아가는 컨테이너들 간에 네트워킹을 위해서 사용됩니다.</li>\n</ul>\n<p>본 포스트에서는 기본값이고 가장 많이 사용되는 <code>bridge</code> 네트워크에 대해서만 다루도록 하겠습니다.</p>\n<h2 id=\"네트워크-생성\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%83%9D%EC%84%B1\" aria-label=\"네트워크 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크 생성</h2>\n<p>먼저 <code>docker network create</code> 커맨드를 사용해서 새로운 Docker 네트워크를 생성해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network create our-net\ne6dfe4a9a5ec85abcb484662c30a3a0fc76df217dde76d52fac39fae8412ca68\n$ docker network <span class=\"token function\">ls</span>\nNETWORK ID          NAME                DRIVER              SCOPE\n143496b94e57        bridge              bridge              <span class=\"token builtin class-name\">local</span>\n311d6534f79f        <span class=\"token function\">host</span>                <span class=\"token function\">host</span>                <span class=\"token builtin class-name\">local</span>\naa89f58200a6        none                null                <span class=\"token builtin class-name\">local</span>\ne6dfe4a9a5ec        our-net             bridge              <span class=\"token builtin class-name\">local</span></code></pre></div>\n<p>추가된 네트워크는 <code>docker network ls</code> 커맨드로 확인할 수 있습니다.<br><code>-d</code> 옵션을 사용하지 않았기 때문에 기본값인 <code>bridge</code> 네트워크로 생성된 것을 볼 수 있습니다.</p>\n<h2 id=\"네트워크-상세-정보\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%83%81%EC%84%B8-%EC%A0%95%EB%B3%B4\" aria-label=\"네트워크 상세 정보 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크 상세 정보</h2>\n<p>방금 추가한 네트워크의 상세 정보를 <code>docker network inspect</code> 커맨드로 확인해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network inspect our-net\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"our-net\"</span>,\n        <span class=\"token string\">\"Id\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"e6dfe4a9a5ec85abcb484662c30a3a0fc76df217dde76d52fac39fae8412ca68\"</span>,\n        <span class=\"token string\">\"Created\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"2020-04-26T19:23:04.563643516Z\"</span>,\n        <span class=\"token string\">\"Scope\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"local\"</span>,\n        <span class=\"token string\">\"Driver\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"bridge\"</span>,\n        <span class=\"token string\">\"EnableIPv6\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"IPAM\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Driver\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"default\"</span>,\n            <span class=\"token string\">\"Options\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n            <span class=\"token string\">\"Config\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token string\">\"Subnet\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.0/16\"</span>,\n                    <span class=\"token string\">\"Gateway\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.1\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Internal\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Attachable\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Ingress\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"ConfigFrom\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Network\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"ConfigOnly\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Containers\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Options\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Labels\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p><code>Containers</code> 항목을 보면 이 네트워크에 아무 컨테이너도 아직 연결되지 않은 것을 알 수 있습니다.</p>\n<h2 id=\"네트워크에-컨테이너-연결\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%97%90-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%97%B0%EA%B2%B0\" aria-label=\"네트워크에 컨테이너 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크에 컨테이너 연결</h2>\n<p>먼저 컨테이너 하나를 <code>one</code>라는 이름으로 실행해보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -itd --name one busybox\n660bafdce2996378cde070dfd894731bb90745e46d2ab10d6504c0cc9f4bdea9</code></pre></div>\n<p>컨테이너를 실행할 때 <code>--network</code> 옵션을 명시해주지 않으면, 기본적으로 <code>bride</code>라는 이름의 디폴트 네트워크에 붙게 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network inspect bridge\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">..</span>. 생략 <span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">)</span>\n        <span class=\"token string\">\"Containers\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"660bafdce2996378cde070dfd894731bb90745e46d2ab10d6504c0cc9f4bdea9\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"one\"</span>,\n                <span class=\"token string\">\"EndpointID\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"40b4bbd8385debf86eef2fc2136315e1a82fa1ef72877bfae25477d6e8e46726\"</span>,\n                <span class=\"token string\">\"MacAddress\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"02:42:ac:11:00:04\"</span>,\n                <span class=\"token string\">\"IPv4Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.17.0.4/16\"</span>,\n                <span class=\"token string\">\"IPv6Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">}</span>,\n        <span class=\"token punctuation\">}</span>,\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">..</span>. 생략 <span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이 <code>one</code> 컨테이너를 위에서 생성한 <code>our-net</code> 네트워크에 연결해보도록 하겠습니다.<br>Docker 네트워크에 컨테이너를 연결할 때는 <code>docker network connect</code> 커맨드를 사용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network connect our-net one</code></pre></div>\n<p><code>our-net</code> 네트워크의 상세 정보를 다시 확인해보면 <code>Containers</code> 항목에 <code>one</code> 컨테이너가 추가된 것을 볼 수 있습니다.<br><code>one</code> 컨테이너에 IP <code>172.19.0.2</code>가 할당된 것도 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network inspect our-net\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"our-net\"</span>,\n        <span class=\"token string\">\"Id\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"e6dfe4a9a5ec85abcb484662c30a3a0fc76df217dde76d52fac39fae8412ca68\"</span>,\n        <span class=\"token string\">\"Created\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"2020-04-26T19:23:04.563643516Z\"</span>,\n        <span class=\"token string\">\"Scope\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"local\"</span>,\n        <span class=\"token string\">\"Driver\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"bridge\"</span>,\n        <span class=\"token string\">\"EnableIPv6\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"IPAM\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Driver\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"default\"</span>,\n            <span class=\"token string\">\"Options\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n            <span class=\"token string\">\"Config\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token string\">\"Subnet\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.0/16\"</span>,\n                    <span class=\"token string\">\"Gateway\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.1\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Internal\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Attachable\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Ingress\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"ConfigFrom\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Network\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"ConfigOnly\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Containers\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"660bafdce2996378cde070dfd894731bb90745e46d2ab10d6504c0cc9f4bdea9\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"one\"</span>,\n                <span class=\"token string\">\"EndpointID\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"cc490148a533d40b3aff33a421cc9a01c731c75a8deb70ab729a5358f2fd381c\"</span>,\n                <span class=\"token string\">\"MacAddress\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"02:42:ac:13:00:02\"</span>,\n                <span class=\"token string\">\"IPv4Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.2/16\"</span>,\n                <span class=\"token string\">\"IPv6Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Options\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Labels\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"네트워크로부터-컨테이너-연결-해제\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EB%A1%9C%EB%B6%80%ED%84%B0-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%97%B0%EA%B2%B0-%ED%95%B4%EC%A0%9C\" aria-label=\"네트워크로부터 컨테이너 연결 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크로부터 컨테이너 연결 해제</h2>\n<p>하나의 컨테이너는 여러 개의 네트워크에 동시에 연결할 수 있습니다.<br>최초에 <code>one</code> 컨테이너를 생성할 때 <code>bridge</code> 네트워크 붙었기 때문에, 현재 <code>one</code> 컨테이너는 <code>our-net</code> 네트워크와 <code>bridge</code> 네트워크에 동시에 붙어있게 됩니다.</p>\n<p><code>one</code> 컨테이너를 <code>bridge</code> 네트워크로부터 때어 내도록 하겠습니다.<br>Docker 네트워크로부터 컨테이너의 연결을 끊을 때는 <code>docker network disconnect</code> 커맨드를 사용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network disconnect bridge one</code></pre></div>\n<h2 id=\"두번째-컨테이너-연결\" style=\"position:relative;\"><a href=\"#%EB%91%90%EB%B2%88%EC%A7%B8-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%97%B0%EA%B2%B0\" aria-label=\"두번째 컨테이너 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두번째 컨테이너 연결</h2>\n<p>네트워크에 홀로 있는 컨테이너는 큰 의미가 없을 것입니다.<br>하나의 컨테이너를 더 <code>our-net</code> 네트워크에 연결해보도록 하겠습니다.</p>\n<p>이번에는 <code>--network</code> 옵션을 사용해서 컨테이너를 실행하면서 바로 연결할 네트워크를 지정해주도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -itd --name two --network our-net busybox\n0e7fe8a59f9d3f8bd545d3e557ffd34100a09b8ebe92ae5a375f37a5d072873d</code></pre></div>\n<p><code>our-net</code> 네트워크의 상세 정보를 확인해보면 <code>two</code> 컨테이너에 IP <code>172.19.0.3</code>가 할당되어 연결되어 있는 것을 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network inspect our-net\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"our-net\"</span>,\n        <span class=\"token string\">\"Id\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"e6dfe4a9a5ec85abcb484662c30a3a0fc76df217dde76d52fac39fae8412ca68\"</span>,\n        <span class=\"token string\">\"Created\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"2020-04-26T19:23:04.563643516Z\"</span>,\n        <span class=\"token string\">\"Scope\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"local\"</span>,\n        <span class=\"token string\">\"Driver\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"bridge\"</span>,\n        <span class=\"token string\">\"EnableIPv6\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"IPAM\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Driver\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"default\"</span>,\n            <span class=\"token string\">\"Options\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n            <span class=\"token string\">\"Config\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token string\">\"Subnet\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.0/16\"</span>,\n                    <span class=\"token string\">\"Gateway\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.1\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Internal\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Attachable\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Ingress\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"ConfigFrom\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"Network\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"ConfigOnly\"</span><span class=\"token builtin class-name\">:</span> false,\n        <span class=\"token string\">\"Containers\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"0e7fe8a59f9d3f8bd545d3e557ffd34100a09b8ebe92ae5a375f37a5d072873d\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"two\"</span>,\n                <span class=\"token string\">\"EndpointID\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"a0e3625e48f0b833cd551d6dfb3b1a2a7614f1343adbc5e6aefa860d917ddea9\"</span>,\n                <span class=\"token string\">\"MacAddress\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"02:42:ac:13:00:03\"</span>,\n                <span class=\"token string\">\"IPv4Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.3/16\"</span>,\n                <span class=\"token string\">\"IPv6Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">}</span>,\n            <span class=\"token string\">\"660bafdce2996378cde070dfd894731bb90745e46d2ab10d6504c0cc9f4bdea9\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">\"Name\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"one\"</span>,\n                <span class=\"token string\">\"EndpointID\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"cc490148a533d40b3aff33a421cc9a01c731c75a8deb70ab729a5358f2fd381c\"</span>,\n                <span class=\"token string\">\"MacAddress\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"02:42:ac:13:00:02\"</span>,\n                <span class=\"token string\">\"IPv4Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"172.19.0.2/16\"</span>,\n                <span class=\"token string\">\"IPv6Address\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Options\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>,\n        <span class=\"token string\">\"Labels\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"컨테이너-간-네트워킹\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EA%B0%84-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%82%B9\" aria-label=\"컨테이너 간 네트워킹 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨테이너 간 네트워킹</h2>\n<p>이제 두 개의 컨테이너가 네트워크를 통해 서로 소통이 가능한지 테스트를 해보도록 하겠습니다.</p>\n<p>먼저 <code>one</code> 컨테이너에서 <code>two</code> 컨테이너를 상대로 <code>ping</code> 명령어를 날려보겠습니다.<br>컨테이너 이름을 호스트네임(hostname)처럼 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token builtin class-name\">exec</span> one <span class=\"token function\">ping</span> two\nPING two <span class=\"token punctuation\">(</span><span class=\"token number\">172.19</span>.0.3<span class=\"token punctuation\">)</span>: <span class=\"token number\">56</span> data bytes\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.3: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.119</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.3: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.105</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.3: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.116</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.3: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.883</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.3: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">4</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.127</span> ms</code></pre></div>\n<p>반대로 <code>two</code> 컨테이너에서 <code>one</code> 컨테이너를 상대로 <code>ping</code> 명령어를 날려보겠습니다.<br>이번에는 컨테이너 이름 대신에 IP를 사용하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token builtin class-name\">exec</span> two <span class=\"token function\">ping</span> <span class=\"token number\">172.19</span>.0.2\nPING <span class=\"token number\">172.19</span>.0.2 <span class=\"token punctuation\">(</span><span class=\"token number\">172.19</span>.0.2<span class=\"token punctuation\">)</span>: <span class=\"token number\">56</span> data bytes\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.2: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.927</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.2: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.079</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.2: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.080</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.2: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.079</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">172.19</span>.0.2: <span class=\"token assign-left variable\">seq</span><span class=\"token operator\">=</span><span class=\"token number\">4</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.107</span> ms</code></pre></div>\n<h2 id=\"네트워크-제거\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%A0%9C%EA%B1%B0\" aria-label=\"네트워크 제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크 제거</h2>\n<p>마지막으로 <code>docker network rm</code> 커맨드를 사용해서 <code>our-net</code> 네트워크를 제거해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network <span class=\"token function\">rm</span> our-net\nError response from daemon: error <span class=\"token keyword\">while</span> removing network: network our-net <span class=\"token function\">id</span> e6dfe4a9a5ec85abcb484662c30a3a0fc76df217dde76d52fac39fae8412ca68 has active endpoints</code></pre></div>\n<p>위와 같이 제거하려는 네트워크 상에서 실행 중인 컨테이너가 있을 때는 제거가 되지가 않습니다.</p>\n<p>그럴 때는 해당 네트워크에 연결되어 실행 중인 모든 컨테이너를 먼저 중지 시키고, 네트워크를 삭제해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker stop one two\none\ntwo\n$ docker network <span class=\"token function\">rm</span> our-net\nour-net</code></pre></div>\n<h2 id=\"네트워크-청소\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%B2%AD%EC%86%8C\" aria-label=\"네트워크 청소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크 청소</h2>\n<p>하나의 호스트 컴퓨터에서 다수의 컨테이너를 돌리다 보면 아무 컨테이너도 연결되어 있지 않은 네트워크가 생기가 마련입니다.<br>이럴 때는 <code>docker network prune</code> 커맨드를 이용해서 불필요한 네트워크를 한번에 모두 제거할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker network prune\nWARNING<span class=\"token operator\">!</span> This will remove all networks not used by at least one container.\nAre you sure you want to continue? <span class=\"token punctuation\">[</span>y/N<span class=\"token punctuation\">]</span> y</code></pre></div>\n<h2 id=\"마치면서\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B4%EC%84%9C\" aria-label=\"마치면서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치면서</h2>\n<p>이상으로 Docker 네트워크의 전반적인 라이프사이클에 대해서 살펴보았습니다.<br>본 포스트에서 사용했던 각 커맨드에 대한 좀 더 자세한 내용은 아래 Docekr CLI 레퍼런스를 참고바라겠습니다.</p>\n<ul>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/network_ls/\">docker network ls</a></li>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/network_create/\">docker network create</a></li>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/network_inspect/\">docker network inspect</a></li>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/network_connect/\">docker network connect</a></li>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/network_disconnect/\">docker network disconnect</a></li>\n<li><a href=\"https://docs.docker.com/engine/reference/commandline/network_rm/\">docker network rm</a></li>\n<li><a href=\"hhttps://docs.docker.com/engine/reference/commandline/network_prune/\">docker network prune</a></li>\n</ul>","timeToRead":9,"fields":{"slug":"/docker-networks/","tags":["Docker","도커","network","네트워크","container","컨테이너","CLI"]},"frontmatter":{"title":"Docker 네트워크 사용법","date":"Apr 26, 2020"}},"next":{"fields":{"slug":"/material-ui-text-fields/"},"frontmatter":{"title":"Material UI의 Text Field 컴포넌트"}}}}}